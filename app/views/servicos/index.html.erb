<div class="float-end">
  <a href="/servicos/new" class=" fs-1 ms-2"><i class="bi bi-plus-circle-fill"></i></a>
  <a href="/servicos/todos" class=" fs-1"><i class="bi bi-filter-circle-fill"></i></a>
</div>

<h1 class="mt-3">Serviços do dia</h1>

<div class=" d-flex justify-content-center mt-5 gap-4" >
  <div class="card shadow text-center text-bg-primary" style="width: 10rem">
    <h5 class="card-header">Valor</h5>
    <div class="card-body">
      <h5 class="card-title fw-bold" style="text-shadow: 1px 1px #000"><%= numero_real(@servicos_total,2) %></h5>
    </div>
  </div>
  <div class="card shadow text-center text-bg-secondary   " style="width: 10rem">
    <h5 class="card-header" >Quantidade</h5>
    <div class="card-body">
      <h5 class="card-title fw-bold" style="text-shadow: 1px 1px #000"><%= pluralize(@servicos_quantidade_diario, 'serviço', 'serviços') %></h5>
    </div>
  </div>
  <div class="card shadow text-center text-bg-danger" style="width: 10rem" >
    <h5 class="card-header" >Pagamento</h5>
    <div class="card-body ">
      <h5 class="card-title fw-bold" style="text-shadow: 1px 1px #000"><%= pluralize( @servicos_pago_pendedente , 'pendente', 'pendentes') %></h5>
    </div>
  </div>
</div>

 
<div class="table-responsive mt-4">
  <table class="table">
    <thead>
      <tr>
        <th style="width: 5%"></th>
        <th style="width: 10%">Data/Hora</th>
        <th style="">Cliente</th>
        <th style="">Serviço</th>
        <th style="">Veículo</th>
        <th>Caixa</th>
        <th>Valor</th>
        <th>Pago?</th>
        <th >Ações</th>
      </tr>
    </thead>

    <tbody>
      <% @servicos_do_dia.each do |servico| %>
        <tr>
          <td>
            <div class="overflow-hidden" style="width:60px; height:60px"> 
                <%#= image_tag servico.imagem, width:60 if servico.imagem.present? %>
                <%= link_to image_tag(servico.imagem, width:60),servico, style: "text-decoration: none;", class:"text-white",
                data:{ bs_toggle: "modal", bs_target: "#servicoModal#{servico.id}", remote: true } if servico.imagem.present? %>
            </div>
          </td>
          <td>
            <%= servico.data.strftime('%d/%m/%Y') %>
            <div style="font-size:0.7rem"><%= servico.data.strftime('%H:%M') %></div>
          </td>
          <td><%= servico.cliente.upcase %></td>
          <td><%= servico.servico.upcase %></td>
          <td><%= servico.veiculo.upcase %></td>
          <td><%= servico.caixa.upcase %></td>

          <td class="moeda"><%= numero_real(servico.valor, 2) %></td>
          <td>
            <% if servico.pago %>
              <span class="badge rounded-pill bg-success">SIM</span>
            <% else %>
              <span class="badge rounded-pill bg-danger">NÃO</span>
            <% end %>
          </td>
          <td>
            <%#= link_to 'Show', servico %>
            <%= link_to '', edit_servico_path(servico), class:'btn btn-primary rounded-pill bi bi-pencil-square text-white fs-6'  %>
            <%= link_to '', servico, method: :delete, class: 'btn btn-danger rounded-pill bi bi-trash3-fill', data: { confirm: 'Are you sure?' } %>
          </td>
        </tr>

        <div class="modal fade" id="servicoModal<%= servico.id %>" tabindex="-1" aria-labelledby="servicoLabel<%= servico.id %>" aria-hidden="true">
        <div class="modal-dialog ">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="servicoLabel<%= servico.id %>">Detalhes do serviço</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
              <div class="modal-body text-center">
                <%= image_tag servico.imagem, width:'80%' %>
                <div class="mt-2"><span style="font-size: 0.8rem"><b>Cliente:</b> </span><%= servico.cliente.upcase %></div>
                <div><span style="font-size: 0.8rem"><b>Serviço:</b> </span><%= servico.servico.upcase %></div>
                <div><span style="font-size: 0.8rem"><b>Veículo:</b> </span><%= servico.veiculo.upcase %></div>
                <div><span style="font-size: 0.8rem"><b>Caixa:</b> </span><%= servico.caixa.upcase %></div>
                <div><span style="font-size: 0.8rem"><b>Valor:</b> </span><%= numero_real(servico.valor, 2) %></div>
                <div class="mt-2">
                  <% if servico.pago %>
                    <span class="badge rounded-pill bg-success">SERVIÇO PAGO</span>
                  <% else %>
                    <span class="badge rounded-pill bg-danger">PAGAMENTO PENDENTE</span>
                  <% end %>
                </div>
              </div>
              
            </div>
          </div>
        </div>

      <% end %>
    </tbody>
  </table>
</div>

<br>

<div class="div-pagy mt-3">
  <%== pagy_bootstrap_nav(@pagy) %>
</div>


